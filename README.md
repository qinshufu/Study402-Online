# Study402-Online

## 项目简介

>编写该项目的目标主要是分布式微服务 .NET 相关技术栈的学习，所以一个完整的项目并不是我的目的。

>所以该项目对于完整的业务逻辑是缺少的，对于相关数据数据的验证也是缺少的。

**该项目不能够直接运行**。

在线教育项目，就类似于腾讯课程，采用微服务架构模式，使用 RabbitMQ， Redis，Consul 等分布式中间件。

项目采用B2B2C的业务模式，培训机构可以入住在线课堂，发布课程，然后运行人员可以审核课程，课程审核完成以后课程才可以上线。

上线的课程分为收费和免费两种模式，收费课程必须付费购买以后才能够才能够学习，而免费可以可以直接学习。但是收费课程的试学章节可以免费学习。

购买课程或学习免费课程有一个租期，默认为一年。当租期到达以后，必须续期才能够继续学习。

项目的核心微服务有：内容服务，媒资服务，搜索服务，订单服务，学习服务，用户服务

完成的核心功能包括：

1. 课程的创建以及审核发布，同时生成课程的预览页面保存到阿里云 OSS，更新课程缓存，更新 ElasticSearch 的索引（实际没有实现）
由于需要调用多个远程接口，所以通过本地消息表实现了 AP 的分布式事务

2. 媒体资源的上传和管理，对于大文件提供了分片上传，对于视频文件上传完成以后，后台任务对视频文件进行转码处理

3. 认证授权功能，使用 JWT 实现授权功能，同时对接微信登录

4. 订单创建和支付，对接微信支付，创建课程购买订单当用户支付完成以后，通过消息总线通知学习服务将课程
加入到课程表中

用到的主要技术有 MassTransit, ASP.NET Core, AutoMapper, Refit, RazorLight(一个第三方抽取出来的Razor模板引擎库), Aliyun OSS, IdGen(id生成器，用来以雪花算法生成支付流水号),
MediatR, Swagger, QRCoder, Autofac, Redis, Dapper, Consul 等。
